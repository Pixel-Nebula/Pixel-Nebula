<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>PixelNebula</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
        <meta name="generator" content="Construct 3" />
        <link rel="manifest" href="appmanifest.json" />
        <link rel="apple-touch-icon" sizes="128x128" href="../../Pictures/Logo.png" />
        <link rel="apple-touch-icon" sizes="256x256" href="../../Pictures/Logo.png" />
        <link rel="apple-touch-icon" sizes="512x512" href="../../Pictures/Logo.png" />
        <link rel="icon" type="image/png" href="../../Pictures/Logo.png" />
        <link rel="stylesheet" href="style.css" />
        <script type="application/javascript" src="/js/lib.js"></script>
    </head>
    <body onload="checkLoginStatus();">
        <noscript>
            <div id="notSupportedWrap">
                <h2 id="notSupportedTitle">This content requires JavaScript</h2>
                <p class="notSupportedMessage">JavaScript appears to be disabled. Please enable it to view this content.</p>
            </div>
        </noscript>
        <script type="3a3ae4e0c6bcb190169ba9ff-text/javascript">
            document.addEventListener('touchmove', function(e) {
            e.preventDefault();
            }, { passive: false });

            document.addEventListener("contextmenu", function (e) {
            	e.preventDefault();
            }, false);

            window.addEventListener("keydown", function(e)
            {
            	if(["Space", "ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].indexOf(e.code) > -1)
            	{
            		e.preventDefault();
            	}
            }, false);
        </script>
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-98DP5VKS42"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "G-98DP5VKS42");
        </script>
        <script src="scripts/supportcheck.js" type="3a3ae4e0c6bcb190169ba9ff-text/javascript"></script>
        <script src="scripts/offlineclient.js" type="3a3ae4e0c6bcb190169ba9ff-module"></script>
        <script src="scripts/main.js" type="3a3ae4e0c6bcb190169ba9ff-module"></script>
        <script src="scripts/register-sw.js" type="3a3ae4e0c6bcb190169ba9ff-module"></script>
        <script src="scripts/rocket-loader.min.js" data-cf-settings="3a3ae4e0c6bcb190169ba9ff-|49" defer=""></script>
        <script>
            function checkLoginStatus() {
        const cookies = document.cookie.split(';').reduce((acc, cookie) => {
            const [key, value] = cookie.split('=').map(c => c.trim());
            acc[key] = value;
            return acc;
        }, {});
        
        const idToken = cookies.IDToken;
        
        if (idToken) {
            fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${idToken}`)
                .then(response => response.json())
                .then(data => {})
                .catch(error => {
                    console.error('Error validating token:', error);
                    // Clear the cookie and redirect to index.html if token validation fails
                    document.cookie = "IDToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
                    window.location.href = '../../index.html';
                });
        } else {
            // Redirect to index.html if no ID Token is found
            window.location.href = '../../index.html';
        }
        }
        </script>
    </body>
</html>
